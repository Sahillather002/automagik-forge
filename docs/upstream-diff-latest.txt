# Upstream Diff Audit
Generated: 2025-09-21T18:41:54Z

Using refs upstream/main and origin/main

## Diff Stat
 .../agents/.github}/workflows/publish.yml          |    3 +-
 .claude/agents/forge-master.md                     |  216 ++++
 .claude/commands/forge.md                          |  163 +++
 .claude/commands/prompt.md                         |  642 ++++++++++++
 .claude/commands/review-merge-pr.md                |  133 +++
 .claude/commands/upmerge.md                        |  190 ++++
 .claude/commands/wish-agent.md                     |  868 ++++++++++++++++
 .claude/commands/wish.md                           |  625 +++++++++++
 .claude/hooks/examples/README.md                   |   13 +
 .claude/hooks/examples/settings.json               |   11 +
 .claude/hooks/examples/tdd-hook.sh                 |   20 +
 .claude/minimal-hook.sh                            |   12 +
 .github/actions/setup-node/action.yml              |    2 -
 .github/workflows/build-all-platforms.yml          |  244 +++++
 .github/workflows/pre-release-simple.yml           |  123 +++
 .github/workflows/pre-release.yml                  |  177 ++--
 .github/workflows/publish.yml.disabled             |  144 +++
 .github/workflows/test.yml                         |    1 -
 .gitignore                                         |    8 +
 .mcp.json                                          |   27 +
 AGENTS.md                                          |   16 +-
 CLAUDE.md                                          |  105 +-
 DEVELOPER.md                                       |  207 ++++
 Dockerfile                                         |    6 +-
 Makefile                                           |  142 +++
 README.md                                          |  532 ++++++++--
 analysis/conflict-patterns.md                      |  190 ++++
 analysis/integration-points.md                     |  335 ++++++
 analysis/upstream-divergence-report.md             |  133 +++
 assets/scripts/toast-notification.ps1              |    2 +-
 check-both.sh                                      |   23 -
 ...b58bcae91a9eb264082d434b61c895fcf418e52e5.json} |   16 +-
 ...44e2e76714f6b359d7b1fa524027116edbc506467.json} |   16 +-
 ...61833c89fe85c4ac09fbe06e3087d7915ca3d8e56.json} |   18 +-
 ...c3dafbd790b84f40021acc9598365ca2e2e16cbf5.json} |   16 +-
 ...9d893242838e12dd2f6eeb440801d5598a9935855.json} |   22 +-
 ...636683636bdfae03e03c5102f9499652b43d64020.json} |   18 +-
 ...dbda54f2b6b918f298934c7a34645ca5c834268fd.json} |   16 +-
 crates/db/Cargo.toml                               |    2 +-
 ...20250903172012_add_branch_template_to_tasks.sql |    2 +
 crates/db/src/models/task.rs                       |   35 +-
 crates/db/src/models/task_attempt.rs               |   68 +-
 crates/deployment/Cargo.toml                       |    3 +-
 crates/executors/Cargo.toml                        |    2 +-
 crates/executors/default_mcp.json                  |   10 +-
 crates/executors/src/executors/codex.rs            |   22 +-
 crates/executors/src/executors/gemini.rs           |    6 +-
 crates/local-deployment/Cargo.toml                 |    2 +-
 crates/local-deployment/src/container.rs           |   77 +-
 crates/server/Cargo.toml                           |    3 +-
 crates/server/src/bin/generate_types.rs            |    3 +
 crates/server/src/mcp/task_server.rs               |   10 +-
 crates/server/src/routes/mod.rs                    |    2 +
 crates/server/src/routes/omni.rs                   |  150 +++
 crates/server/src/routes/task_attempts.rs          |    5 +-
 crates/server/src/routes/tasks.rs                  |    2 +
 crates/services/Cargo.toml                         |    2 +-
 crates/services/src/services/auth.rs               |    6 +-
 crates/services/src/services/config/mod.rs         |   16 +-
 .../services/src/services/config/versions/mod.rs   |    1 +
 crates/services/src/services/config/versions/v1.rs |    2 +
 crates/services/src/services/config/versions/v2.rs |    4 +
 crates/services/src/services/config/versions/v7.rs |  116 +++
 crates/services/src/services/git.rs                |    6 +-
 crates/services/src/services/mod.rs                |    1 +
 crates/services/src/services/omni/client.rs        |   56 +
 crates/services/src/services/omni/mod.rs           |   73 ++
 crates/services/src/services/omni/types.rs         |  189 ++++
 crates/services/src/services/worktree_manager.rs   |    2 +-
 crates/services/tests/git_workflow.rs              |   12 +-
 crates/utils/Cargo.toml                            |    2 +-
 crates/utils/src/assets.rs                         |   23 +-
 crates/utils/src/path.rs                           |   10 +-
 crates/utils/src/port_file.rs                      |    4 +-
 dev_assets_seed/config.json                        |   19 -
 frontend/index.html                                |   18 +-
 frontend/package.json                              |    5 +-
 frontend/public/favicon-16x16.png                  |  Bin 601 -> 659 bytes
 frontend/public/favicon-32x32.png                  |  Bin 1293 -> 1434 bytes
 frontend/public/favicon.ico                        |  Bin 15406 -> 15406 bytes
 frontend/public/forge-clear.png                    |  Bin 0 -> 40441 bytes
 frontend/public/forge-clear.svg                    |    1 +
 frontend/public/forge-dark.png                     |  Bin 0 -> 44495 bytes
 frontend/public/forge-dark.svg                     |    1 +
 frontend/public/screenshot.png                     |  Bin 0 -> 120487 bytes
 frontend/public/site.webmanifest                   |    2 +-
 frontend/public/vibe-kanban-logo-dark.svg          |    3 -
 frontend/public/vibe-kanban-logo.svg               |    3 -
 .../public/vibe-kanban-screenshot-overview.png     |  Bin 1849253 -> 0 bytes
 .../components/dialogs/auth/GitHubLoginDialog.tsx  |    2 +-
 .../components/dialogs/auth/ProvidePatDialog.tsx   |    2 +-
 .../components/dialogs/global/OnboardingDialog.tsx |    2 +-
 .../dialogs/global/PrivacyOptInDialog.tsx          |    4 +-
 .../dialogs/global/ReleaseNotesDialog.tsx          |    4 +-
 .../projects/ProjectEditorSelectionDialog.tsx      |    2 +-
 .../dialogs/projects/ProjectFormDialog.tsx         |    2 +-
 .../dialogs/settings/CreateConfigurationDialog.tsx |    2 +-
 .../dialogs/settings/DeleteConfigurationDialog.tsx |    2 +-
 .../dialogs/shared/FolderPickerDialog.tsx          |    2 +-
 .../components/dialogs/tasks/CreatePRDialog.tsx    |    2 +-
 .../dialogs/tasks/DeleteTaskConfirmationDialog.tsx |    2 +-
 .../dialogs/tasks/EditorSelectionDialog.tsx        |    2 +-
 .../src/components/dialogs/tasks/RebaseDialog.tsx  |    2 +-
 .../components/dialogs/tasks/RestoreLogsDialog.tsx |    2 +-
 .../components/dialogs/tasks/TaskFormDialog.tsx    |   31 +
 .../dialogs/tasks/TaskTemplateEditDialog.tsx       |    2 +-
 frontend/src/components/layout/navbar.tsx          |    4 +-
 frontend/src/components/logo.tsx                   |   19 +-
 frontend/src/components/omni/OmniCard.tsx          |  128 +++
 frontend/src/components/omni/OmniModal.tsx         |  230 +++++
 frontend/src/components/omni/api.ts                |   29 +
 frontend/src/components/omni/types.ts              |   27 +
 frontend/src/components/projects/ProjectCard.tsx   |    2 +-
 .../src/components/tasks/TaskFollowUpSection.tsx   |    2 +-
 frontend/src/components/theme-provider.tsx         |    4 +-
 frontend/src/components/ui/button.tsx              |    2 +-
 frontend/src/components/ui/dialog.tsx              |    2 +-
 frontend/src/lib/api.ts                            |    3 +
 frontend/src/main.tsx                              |    2 +
 frontend/src/pages/project-tasks.tsx               |    1 +
 frontend/src/pages/settings/GeneralSettings.tsx    |    5 +-
 frontend/src/styles/index.css                      |  719 ++++++++++++-
 frontend/tailwind.config.js                        |    5 +-
 frontend/vite.config.ts                            |   64 +-
 genie.sh                                           |   16 +
 dev_assets_seed/db.sqlite => genie/wishes/.gitkeep |    0
 genie/wishes/fork-merge-pain-relief-wish.md        |  238 +++++
 genie/wishes/omni-notification-wish.md             | 1087 ++++++++++++++++++++
 genie/wishes/per-agent-mcp-tool-selection-wish.md  |  445 ++++++++
 genie/wishes/upstream-merge-wish.md                |  317 ++++++
 gh-build.sh                                        | 1028 ++++++++++++++++++
 local-build.sh                                     |   65 +-
 npx-cli/README.md                                  |   10 +-
 npx-cli/automagik-forge-0.3.4.tgz                  |  Bin 0 -> 25399225 bytes
 npx-cli/bin/cli.js                                 |   44 +-
 npx-cli/package.json                               |   10 +-
 package.json                                       |   54 +-
 pnpm-lock.yaml                                     |    7 +-
 roadmap-plan.md                                    |  136 +++
 rust-toolchain.toml                                |    2 +-
 scripts/release-analyzer.sh                        |  353 +++++++
 shared/types.ts                                    |   18 +-
 test-npm-package.sh                                |   42 -
 143 files changed, 11095 insertions(+), 508 deletions(-)

## Name-Status
R099	.github/workflows/publish.yml	.claude/agents/.github/workflows/publish.yml
A	.claude/agents/forge-master.md
A	.claude/commands/forge.md
A	.claude/commands/prompt.md
A	.claude/commands/review-merge-pr.md
A	.claude/commands/upmerge.md
A	.claude/commands/wish-agent.md
A	.claude/commands/wish.md
A	.claude/hooks/examples/README.md
A	.claude/hooks/examples/settings.json
A	.claude/hooks/examples/tdd-hook.sh
A	.claude/minimal-hook.sh
M	.github/actions/setup-node/action.yml
A	.github/workflows/build-all-platforms.yml
A	.github/workflows/pre-release-simple.yml
M	.github/workflows/pre-release.yml
A	.github/workflows/publish.yml.disabled
M	.github/workflows/test.yml
M	.gitignore
A	.mcp.json
M	AGENTS.md
M	CLAUDE.md
A	DEVELOPER.md
M	Dockerfile
A	Makefile
M	README.md
A	analysis/conflict-patterns.md
A	analysis/integration-points.md
A	analysis/upstream-divergence-report.md
M	assets/scripts/toast-notification.ps1
D	check-both.sh
R073	crates/db/.sqlx/query-216efabcdaa2a6ea166e4468a6ac66d3298666a546e964a509538731ece90c9e.json	crates/db/.sqlx/query-1bacc6c2253a92ee3b5c282b58bcae91a9eb264082d434b61c895fcf418e52e5.json
R074	crates/db/.sqlx/query-8cc087f95fb55426ee6481bdd0f74b2083ceaf6c5cf82456a7d83c18323c5cec.json	crates/db/.sqlx/query-2296414bd6baa4ff3b00c1844e2e76714f6b359d7b1fa524027116edbc506467.json
R063	crates/db/.sqlx/query-00aa2d8701f6b1ed2e84ad00b9b6aaf8d3cce788d2494ff283e2fad71df0a05d.json	crates/db/.sqlx/query-29e8d701efbd44e99fee76e61833c89fe85c4ac09fbe06e3087d7915ca3d8e56.json
R074	crates/db/.sqlx/query-2188432c66e9010684b6bb670d19abd77695b05d1dd84ef3102930bc0fe6404f.json	crates/db/.sqlx/query-52c1b04069cb9887d33724bc3dafbd790b84f40021acc9598365ca2e2e16cbf5.json
R051	crates/db/.sqlx/query-01a0f9724e5fce7d3312a742e72cded85605ee540150972e2a8364919f56d5c0.json	crates/db/.sqlx/query-6ff74bb31912078933ee96e9d893242838e12dd2f6eeb440801d5598a9935855.json
R064	crates/db/.sqlx/query-5ae4dea70309b2aa40d41412f70b200038176dc8c56c49eeaaa65763a1b276eb.json	crates/db/.sqlx/query-8f575b3611d69314df63d59636683636bdfae03e03c5102f9499652b43d64020.json
R058	crates/db/.sqlx/query-024b53c73eda9f79c65997261d5cc3b35ce19c27b22dcc03dbb3fd11ad7bbfe2.json	crates/db/.sqlx/query-be2c9141eb8405c6590397adbda54f2b6b918f298934c7a34645ca5c834268fd.json
M	crates/db/Cargo.toml
A	crates/db/migrations/20250903172012_add_branch_template_to_tasks.sql
M	crates/db/src/models/task.rs
M	crates/db/src/models/task_attempt.rs
M	crates/deployment/Cargo.toml
M	crates/executors/Cargo.toml
M	crates/executors/default_mcp.json
M	crates/executors/src/executors/codex.rs
M	crates/executors/src/executors/gemini.rs
M	crates/local-deployment/Cargo.toml
M	crates/local-deployment/src/container.rs
M	crates/server/Cargo.toml
M	crates/server/src/bin/generate_types.rs
M	crates/server/src/mcp/task_server.rs
M	crates/server/src/routes/mod.rs
A	crates/server/src/routes/omni.rs
M	crates/server/src/routes/task_attempts.rs
M	crates/server/src/routes/tasks.rs
M	crates/services/Cargo.toml
M	crates/services/src/services/auth.rs
M	crates/services/src/services/config/mod.rs
M	crates/services/src/services/config/versions/mod.rs
M	crates/services/src/services/config/versions/v1.rs
M	crates/services/src/services/config/versions/v2.rs
A	crates/services/src/services/config/versions/v7.rs
M	crates/services/src/services/git.rs
M	crates/services/src/services/mod.rs
A	crates/services/src/services/omni/client.rs
A	crates/services/src/services/omni/mod.rs
A	crates/services/src/services/omni/types.rs
M	crates/services/src/services/worktree_manager.rs
M	crates/services/tests/git_workflow.rs
M	crates/utils/Cargo.toml
M	crates/utils/src/assets.rs
M	crates/utils/src/path.rs
M	crates/utils/src/port_file.rs
D	dev_assets_seed/config.json
M	frontend/index.html
M	frontend/package.json
M	frontend/public/favicon-16x16.png
M	frontend/public/favicon-32x32.png
M	frontend/public/favicon.ico
A	frontend/public/forge-clear.png
A	frontend/public/forge-clear.svg
A	frontend/public/forge-dark.png
A	frontend/public/forge-dark.svg
A	frontend/public/screenshot.png
M	frontend/public/site.webmanifest
D	frontend/public/vibe-kanban-logo-dark.svg
D	frontend/public/vibe-kanban-logo.svg
D	frontend/public/vibe-kanban-screenshot-overview.png
M	frontend/src/components/dialogs/auth/GitHubLoginDialog.tsx
M	frontend/src/components/dialogs/auth/ProvidePatDialog.tsx
M	frontend/src/components/dialogs/global/OnboardingDialog.tsx
M	frontend/src/components/dialogs/global/PrivacyOptInDialog.tsx
M	frontend/src/components/dialogs/global/ReleaseNotesDialog.tsx
M	frontend/src/components/dialogs/projects/ProjectEditorSelectionDialog.tsx
M	frontend/src/components/dialogs/projects/ProjectFormDialog.tsx
M	frontend/src/components/dialogs/settings/CreateConfigurationDialog.tsx
M	frontend/src/components/dialogs/settings/DeleteConfigurationDialog.tsx
M	frontend/src/components/dialogs/shared/FolderPickerDialog.tsx
M	frontend/src/components/dialogs/tasks/CreatePRDialog.tsx
M	frontend/src/components/dialogs/tasks/DeleteTaskConfirmationDialog.tsx
M	frontend/src/components/dialogs/tasks/EditorSelectionDialog.tsx
M	frontend/src/components/dialogs/tasks/RebaseDialog.tsx
M	frontend/src/components/dialogs/tasks/RestoreLogsDialog.tsx
M	frontend/src/components/dialogs/tasks/TaskFormDialog.tsx
M	frontend/src/components/dialogs/tasks/TaskTemplateEditDialog.tsx
M	frontend/src/components/layout/navbar.tsx
M	frontend/src/components/logo.tsx
A	frontend/src/components/omni/OmniCard.tsx
A	frontend/src/components/omni/OmniModal.tsx
A	frontend/src/components/omni/api.ts
A	frontend/src/components/omni/types.ts
M	frontend/src/components/projects/ProjectCard.tsx
M	frontend/src/components/tasks/TaskFollowUpSection.tsx
M	frontend/src/components/theme-provider.tsx
M	frontend/src/components/ui/button.tsx
M	frontend/src/components/ui/dialog.tsx
M	frontend/src/lib/api.ts
M	frontend/src/main.tsx
M	frontend/src/pages/project-tasks.tsx
M	frontend/src/pages/settings/GeneralSettings.tsx
M	frontend/src/styles/index.css
M	frontend/tailwind.config.js
M	frontend/vite.config.ts
A	genie.sh
R100	dev_assets_seed/db.sqlite	genie/wishes/.gitkeep
A	genie/wishes/fork-merge-pain-relief-wish.md
A	genie/wishes/omni-notification-wish.md
A	genie/wishes/per-agent-mcp-tool-selection-wish.md
A	genie/wishes/upstream-merge-wish.md
A	gh-build.sh
M	local-build.sh
M	npx-cli/README.md
A	npx-cli/automagik-forge-0.3.4.tgz
M	npx-cli/bin/cli.js
M	npx-cli/package.json
M	package.json
M	pnpm-lock.yaml
A	roadmap-plan.md
M	rust-toolchain.toml
A	scripts/release-analyzer.sh
M	shared/types.ts
D	test-npm-package.sh

### Output Files
- Diff summary: docs/upstream-diff-latest.txt
- Full diff: docs/upstream-diff-full.patch
- Fetch log: docs/upstream-diff-fetch.log

